package  {	import flash.display.MovieClip;	import flash.events.KeyboardEvent;	import flash.events.MouseEvent;	import flash.geom.Point;	import flash.ui.Keyboard;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.events.Event;		public class Main extends MovieClip	{		public var paddle1:Paddle;		public var paddle2:Paddle;		public var ball:Ball;		public var court:Court;		public var hud:MovieClip;		public var startText:TextField;		public var scoreBoard:ScoreBoard;				public function Main() {			if( !this.stage ) 				 this.addEventListener( Event.ADDED_TO_STAGE, init ); 			else 				 init(); 		} 		private function init(e:Event = null):void 		{ 			this.removeEventListener( Event.ADDED_TO_STAGE, init ); 			this.hud = new MovieClip();						// score setup			this.scoreBoard = new ScoreBoard(10);						this.hud.addChild(this.scoreBoard);						this.addChild(this.hud);			this.court = new Court();			this.addChild(court);						this.court.height = this.stage.stageHeight;			this.court.width = this.stage.stageWidth;			this.court.height -= this.scoreBoard.height;			this.court.y += this.scoreBoard.height;						this.paddle1 = new Paddle(this.court, 60, 10, this.court.width,this.court.height, new Point(1,0));			this.court.addChild(paddle1);						this.paddle2 = new Paddle(this.court, 480,10, this.court.width,this.court.height, new Point(-1,0), 40, 38);			this.court.addChild(paddle2);						this.startText = showText("Press Any Key to Start", 160, 30 );						setBall();		}				public function startGame(e:KeyboardEvent):void {						this.stage.removeEventListener(KeyboardEvent.KEY_DOWN, startGame);			this.stage.removeChild(this.startText);			this.paddle1.init();			this.paddle2.init();			this.ball.init();						var r1 = 1.0 - Math.random()*2;			var initDir:Point = new Point(r1,1.0-r1);			//initDir.normalize(1.0);			this.ball.pushBall(initDir);		}				public function buildHUD():void {			//make section of the screen for display info		}					public function setBall():void {					this.ball = new Ball(this.court.width / 2.0, this.court.height / 2.0, 10, this.court);			this.court.addChild(this.ball);			this.ball.addEventListener(GameEvent.SCORE_POINT, scorePoint);			this.paddle1.ball = this.ball;			this.paddle2.ball = this.ball;		}				public function showText(text_data:String, w:Number, h:Number):TextField {			var tf:TextField = new TextField();			var myFormat:TextFormat = new TextFormat();			myFormat.size = 16;			tf.text = text_data;			tf.defaultTextFormat = myFormat;			tf.x = this.court.width/2.0 - w/2.0;			tf.y = this.court.height/2.0 - h/2.0;			tf.width = w;			tf.height = h;			this.stage.addChild(tf);				this.stage.addEventListener(KeyboardEvent.KEY_DOWN, startGame);			return tf;		}				public function scorePoint(e:GameEvent):void{			// reset ball			this.ball.destroy();			this.court.removeChild(this.ball);			setBall();			// set serve			this.startText = showText("Press Any Key to serve", 160, 30 );		}	}		}