package  {	import flash.geom.Point;	import flash.display.MovieClip;	import flash.events.Event;		public class Ball extends MovieClip{		public var vector:Point;		public var speed:Number;				public function Ball(x:int, y:int, speed:Number) {			// constructor code			this.vector= new Point();			this.x = x;			this.y = y;			this.speed=speed;					}		public function init():void {			//void			this.stage.addEventListener(Event.ENTER_FRAME, checkLoop);														}		public function checkLoop(event:Event) {			checkCollision();			moveBall();					}				public function pushBall(v:Point):void {		this.vector = v;		}				public function moveBall():void {			this.x += this.vector.x * this.speed;			this.y += this.vector.y * this.speed;		}		public function checkCollision():void {			var normal:Point;										if (this.y - 0.5 * this.height <= 0) {				//bouncedown				this.y = this.height/2.0;				normal = new Point(0,1);				bounce(this.vector, normal);			}			else if (this.y + 0.5 * this.height >= this.stage.stageHeight) {				//bounceup				this.y= this.stage.stageHeight - this.height/2.0;				normal = new Point(0,-1);				bounce(this.vector, normal);			}			else if (this.x - 0.5 * this.width <= 0) {				this.x = this.width/2.0;				normal = new Point(1,0);				bounce(this.vector, normal);			}			else if (this.x + 0.5 * this.width >= this.stage.stageWidth) {				this.x = this.stage.stageWidth - this.width/2.0;				normal = new Point(-1,0);				bounce(this.vector,normal);			}		}		public function bounce(v:Point, n:Point):void {			// R = V - 2 * (V · N)     			var d:Number = dot(v,n); 			var new_vec:Point =  new Point((v.x - 2 * d * n.x), (v.y - 2 * d * n.y));			this.vector = new_vec;		}				private function dot(v1:Point,v2:Point):Number {			return (v1.x*v2.x) + (v1.y*v2.y);		}	}	}